# Статистический и регрессионный анализ с Statsmodels

## Введение

Библиотека [`statsmodels`](https://www.statsmodels.org/) является одной базовых для статистического и эконометрического анализа.
Она включает ([ссылка](https://www.statsmodels.org/stable/user-guide.html))

- Регрессионные и линейные модели (основное):
	- линейная регрессия (количественная зависимая переменная)
	- обобщённая линейная модель
	- регрессия с дискретной зависимой переменной (logit/probit и др)
	- робастная линейная регрессия (квант ильная и др)
	- другие модели (ANOVA и др.)
- Анализ временных рядов (основное):
	- ARMA/ARIMA
	- экспоненциальное сглаживание
	- ARDL
	- VAR, VECM, VARMA
	- модели пространства состояний
	- модели с переключателем
	- фильтрация (в том числе, на сезонность)
	- тесты для временных рядов: единичного корня и др
- Статистические инструменты (основные):
	- эмпирическая cdf
	- построение графиков
	- тестирование гипотез
	- вывод и оформление результатов подгонки моделей
	- вспомогательные функции

Импорт библиотеки

- `import statsmodels.api as sm`: регрессии, спецификация через матрицы регрессионного дизайна
- `statsmodels.formula.api as smf`: регрессии, спецификация через формулу
- `import statsmodels.tsa.api as tsa`: модели временных рядов

## Работа с моделями из Statsmodels

Алгоритм
* Инициализация модели (спецификация)
* подгонка под наблюдения (оценка) с необходимыми параметрами, метод `.fit(...)`
* работа с подогнанной моделью
	- вывод протокола подгонки
	- значимость/интерпретация коэффициентов, R2
	- тестирование гипотез о коэффициентах
	- другое

## Инициализация/спецификация модели

Два альтернативных способа 
- через формулу
- через матрицы регрессионного дизайна `y, X`

### спецификация через формулу

Формула записывается как строка по правилу 
- `endog~1+exog1+exog2+...` или `enog~exog1+exog2+...` для регрессии с константой
- `endog~0+exog1+exog2+...` для регрессии без константы

**Важное замечание**
- категориальные регрессоры автоматические преобразуется в пул дамми-переменных и они включаются в модель
- преобразование переменных ('на лету')

|Преобразование|Интерфейс|
|-|-|
|квадрат регрессора|`I(exog**2)`|
|логарифм переменной|`np.log(...)`|
||(используем функцию пакета `numpy`)|
|масштабирование|`I(exog*c)`|
|(умножить/разделить на число `c`)|`I(exog/c)`|
|умножение переменных|`I(exog1*exog2)`|
||`exog1:exog2`|


